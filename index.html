<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Ghi c√¢n</title>

  <link rel="manifest" href="./manifest.json">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">
  <link rel="stylesheet" href="./style.css">

  <meta name="theme-color" content="#008f39" />
</head>
<body>

<!-- ===================== APP ROOT ===================== -->
<div id="app"></div>

<!-- ===================== L·ªäCH S·ª¨ ===================== -->
<div id="history" style="padding: 15px;">

  <h2 style="margin-top: 20px;">üìå L·ªãch s·ª≠ TH√ÅI</h2>
  <table class="history-table" id="thai-table">
    <thead>
      <tr>
        <th>Lo·∫°i</th>
        <th>S·ªë k√Ω</th>
        <th>Gi·ªù</th>
        <th>X√≥a</th>
      </tr>
    </thead>
    <tbody id="thai-history">
      <!-- n·ªôi dung ƒë∆∞·ª£c render b·ªüi app.js -->
    </tbody>
  </table>

  <h2 style="margin-top: 30px;">üìå L·ªãch s·ª≠ RI</h2>
  <table class="history-table" id="ri-table">
    <thead>
      <tr>
        <th>Lo·∫°i</th>
        <th>S·ªë k√Ω</th>
        <th>Gi·ªù</th>
        <th>X√≥a</th>
      </tr>
    </thead>
    <tbody id="ri-history">
      <!-- n·ªôi dung ƒë∆∞·ª£c render b·ªüi app.js -->
    </tbody>
  </table>

</div>

<script src="./app.js"></script>

<script>
/* ======================== KI·ªÇM TRA STANDALONE ======================== */
function isStandalone(){
  return window.matchMedia('(display-mode: standalone)').matches || navigator.standalone === true;
}

if(!isStandalone()){
  document.body.innerHTML = `
    <div style="display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;text-align:center;padding:20px;">
      <h2>‚ö† ·ª®ng d·ª•ng ch·ªâ ch·∫°y khi th√™m v√†o M√†n h√¨nh ch√≠nh</h2>
      <p>M·ªü Safari ‚Üí Chia s·∫ª ‚Üí Th√™m v√†o M√†n h√¨nh ch√≠nh</p>
    </div>`;
} else {

  /* ======================== M·∫¨T KH·∫®U APP ======================== */
  const APP_PASSWORD = "devilluan";

  if (localStorage.getItem("authenticated") === "true") {
    initApp();
  } else {
    (async function () {
      let ok = false;
      while (!ok) {
        const pw = prompt("Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ m·ªü ·ª©ng d·ª•ng:");
        if (pw === null) {
          document.body.innerHTML = "<p>ƒê√£ tho√°t ·ª©ng d·ª•ng.</p>";
          return;
        }
        if (pw === APP_PASSWORD) {
          ok = true;
          localStorage.setItem("authenticated", "true");
        } else alert("M·∫≠t kh·∫©u sai, th·ª≠ l·∫°i!");
      }
      initApp();
    })();
  }
}

/* ======================== SERVICE WORKER ======================== */
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("./sw.js")
      .then(() => console.log("SW registered"))
      .ca
